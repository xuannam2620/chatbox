<!DOCTYPE html>
<html lang="en">
    <head>
        <title></title>
        <!--firebase-->
        <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
        <!-- jquery-->
        <script   src="https://code.jquery.com/jquery-1.12.3.js"   integrity="sha256-1XMpEtA4eKXNNpXcJ1pmMPs8JV+nwLdEqwiJeCQEkyc="   crossorigin="anonymous"></script>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="css\index.css">
    </head>
    <body>
        <div class="container-fluid" style="padding-top: 10px;">
            <div class="panel panel-primary">
                <div class="panel-heading">CLC Chat group</div>
                <div class="panel-body">
                    <div class="col-md-12">
                        <div class="old-messages">
                            <div id="old_messages"></div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-1">
                        <input type="text" class="form-control" id="name" placeholder="Name">
                        </div>
                        <div class="col-md-11">
                            <input type="text" class="form-control"  id="message" placeholder="Enter to chat">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            var mReferData= new Firebase('https://namtxchat.firebaseio.com/');
            $('#message').keypress(function(e){
                if(e.keyCode==13){
                    var name    =   $('#name').val();
                    var mess    =   $('#message').val();
                    name= name==''?'guest':name;
                    mReferData.push({name: name, text: mess});
                    $('#message').val('');
                }
            });
            mReferData.on('child_added', function(snapshot){
               var data= snapshot.val();
               displayMessage(data.name, data.text);
            });
            function displayMessage(name, text){
                var element ='<blockquote>';
                element +='<span><kbd>'+name+'</kbd></span>';
                element += '<span class="text-primary padding-l-10">'+text+'</span>';
                element += '</bloclqoute>'
                $('#old_messages').append(element);
                $(".old-messages").animate({ scrollTop: $('.old-messages').prop("scrollHeight")}, 100);
                $('#message').focus();
            }
        </script>
    </body>
</html>
